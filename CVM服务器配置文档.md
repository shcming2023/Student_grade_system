# 腾讯云CVM服务器配置技术文档

## 文档信息
- **文档版本**: 1.0
- **生成时间**: 2025年12月27日
- **服务器ID**: VM-0-16-tencentos
- **用途**: 开发产品部门基础设施配置基准参考

---

## 1. 系统基础信息

### 1.1 操作系统信息
| 配置项 | 参数值 |
|--------|--------|
| 操作系统 | TencentOS Server release 3.1 (Final) |
| 内核版本 | Linux 5.4.119-19.0009.59 |
| 架构 | x86_64 |
| 虚拟化 | KVM full virtualization |
| 系统运行时间 | 73天12分钟 |

### 1.2 硬件配置
| 组件 | 规格参数 |
|------|----------|
| CPU | AMD处理器，4核心，2核心/插槽，2线程/核心 |
| CPU频率 | 2545.218 MHz |
| 缓存 | L1:32K, L2:4096K, L3:32768K |
| 内存总量 | 7.4GB |
| 内存已用 | 2.9GB (39%) |
| 内存可用 | 3.9GB |
| Swap | 4.0GB (已用42MB) |

---

## 2. 存储配置

### 2.1 磁盘分区信息
| 分区 | 大小 | 已用 | 可用 | 使用率 | 挂载点 | 文件系统 |
|------|------|------|------|--------|--------|----------|
| /dev/vda1 | 50GB | 33GB | 15GB | 70% | / | ext4 |

### 2.2 磁盘设备信息
| 设备 | 类型 | 大小 | 备注 |
|------|------|------|------|
| /dev/vda | 磁盘 | 50GB | 主系统盘 |
| /dev/vda1 | 分区 | 50GB | Linux分区 |
| /dev/sr0 | 光驱 | 117M | 只读存储 |

---

## 3. 网络配置

### 3.1 网络接口信息
| 接口 | IP地址 | 子网掩码 | 广播地址 | MAC地址 | 状态 |
|------|--------|----------|----------|---------|------|
| lo | 127.0.0.1 | 8 | - | 00:00:00:00:00:00 | UP |
| eth0 | 172.17.0.16 | /20 | 172.17.15.255 | 52:54:00:83:cc:5b | UP |

### 3.2 路由配置
| 目标网络 | 网关 | 接口 | 指标 |
|----------|------|------|------|
| 0.0.0.0/0 | 172.17.0.1 | eth0 | 100 |
| 172.17.0.0/20 | - | eth0 | 100 |

### 3.3 公网访问信息
| 配置项 | 值 |
|--------|-----|
| 公网IP | 101.35.149.123 |
| 内网IP | 172.17.0.16 |
| 网关 | 172.17.0.1 |

---

## 4. 端口服务状态

### 4.1 监听端口列表
| 端口 | 协议 | 进程 | 状态 | 服务类型 |
|------|------|------|------|----------|
| 22 | TCP | sshd | LISTEN | SSH服务 |
| 22022 | TCP | sshd | LISTEN | SSH备用端口 |
| 20000 | TCP | sshd | LISTEN | SSH服务端口 |
| 9000 | TCP | sshd | LISTEN | SSH服务端口 |
| 8080 | TCP | python3 | LISTEN | Hello World应用 |
| 8081 | TCP | sshd | LISTEN | SSH服务端口 |
| 8082 | TCP | sshd | LISTEN | SSH服务端口 |
| 8083 | TCP | python3 | LISTEN | Hello World应用 |
| 8888 | TCP | python3 | LISTEN | Web服务 |
| 34297 | TCP | node | LISTEN | 本地Node服务 |
| 51000-51009 | TCP | 多个进程 | LISTEN | AI辅助服务 |

### 4.2 安全组端口规则
| 协议 | 端口 | 策略 | 用途 | 备注 |
|------|------|------|------|------|
| TCP | 9000 | 允许 | Minio | 已开放 |
| TCP | 8083 | 允许 | Jellyfin | 已开放 |
| TCP | 22 | 拒绝 | SSH | 测试规则 |
| TCP | 22022 | 允许 | SSH新端口 | 已开放 |
| TCP | 80 | 拒绝 | HTTP | Dify限制 |
| TCP | 443 | 拒绝 | HTTPS | Dify限制 |
| TCP | 8081 | 允许 | 内网Dify隧道 | 已开放 |
| TCP | 8082 | 允许 | 内网Overleaf隧道 | 已开放 |

---

## 5. 系统服务状态

### 5.1 核心系统服务
| 服务名称 | 状态 | 描述 |
|----------|------|------|
| systemd-journald | running | 日志服务 |
| systemd-logind | running | 登录管理 |
| systemd-udevd | running | 设备管理 |
| NetworkManager | running | 网络管理 |
| rsyslog | running | 系统日志 |
| chronyd | running | 时间同步 |
| sshd | running | SSH守护进程 |
| crond | running | 定时任务 |

### 5.2 应用服务
| 服务名称 | 状态 | 描述 |
|----------|------|------|
| helloworld | running | Hello World Web应用 |
| containerd | running | 容器运行时 |
| tat_agent | running | 腾讯云监控代理 |
| packagekit | running | 软件包管理 |

---

## 6. 资源使用分析

### 6.1 CPU使用排行 (Top 5)
| 进程 | PID | CPU% | 内存% | 命令 |
|------|-----|------|-------|------|
| ckg_server | 1820801 | 11.8% | 1.6% | ./binary/ckg_server |
| node | 1820885 | 11.7% | 6.0% | VS Code扩展主机 |
| node | 2916072 | 9.8% | 5.2% | CodeBuddy服务器 |
| trae-helper | 1820738 | 9.6% | 1.3% | AI辅助工具 |
| ai-agent | 1820789 | 6.2% | 4.5% | AI代理服务 |

### 6.2 内存使用排行 (Top 5)
| 进程 | PID | 内存% | CPU% | 内存使用 |
|------|-----|-------|------|----------|
| node | 1821714 | 6.3% | 5.3% | 495MB (AI服务) |
| node | 1820885 | 6.0% | 11.7% | 472MB (VS Code) |
| node | 2916072 | 5.2% | 9.8% | 409MB (CodeBuddy) |
| ai-agent | 1820789 | 4.5% | 6.2% | 352MB (AI代理) |
| YDService | 2098436 | 2.9% | 0.8% | 225MB (云监控) |

---

## 7. 软件环境

### 7.1 已安装软件
| 软件 | 版本 | 用途 |
|------|------|------|
| Python3 | 3.6.8 | Web应用运行环境 |
| Docker | 26.1.3 | 容器化部署 |
| Node.js | 多版本 | JavaScript运行环境 |

### 7.2 未安装软件
| 软件 | 状态 | 建议 |
|------|------|------|
| Nginx | 未安装 | 建议安装用于反向代理 |
| firewalld | 未运行 | 防火墙管理工具 |

---

## 8. 安全配置

### 8.1 防火墙规则
| 链 | 规则 | 动作 |
|----|------|------|
| INPUT | TCP SYN匹配YJ-GLOBAL-INBLOCK | DROP |
| OUTPUT | TCP SYN匹配YJ-GLOBAL-OUTBLOCK | DROP |

### 8.2 安全建议
1. SSH端口已更改为22022，提高了安全性
2. 公网HTTP/HTTPS端口已关闭，增强安全防护
3. 建议定期检查和更新安全组规则
4. 考虑配置更细粒度的防火墙规则

---

## 9. 性能评估

### 9.1 系统负载
- **当前负载**: 0.44, 0.39, 0.40 (1分钟、5分钟、15分钟)
- **负载状态**: 正常，系统运行稳定
- **CPU利用率**: 中等，有充足的计算资源

### 9.2 存储状况
- **磁盘使用率**: 70%，剩余空间充足
- **IO性能**: 系统分区采用ext4，性能良好
- **建议**: 监控磁盘使用，定期清理

### 9.3 内存状况
- **内存使用率**: 39%，使用健康
- **Swap使用**: 极少 (1%)
- **内存压力**: 低，系统运行流畅

---

## 10. 部署建议

### 10.1 Web应用部署
- **推荐端口**: 8083 (已开放安全组)
- **运行环境**: Python3 SimpleHTTPServer
- **访问地址**: http://101.35.149.123:8083

### 10.2 容器化部署
- Docker已安装，可进行容器化部署
- 建议使用Docker Compose进行多容器编排
- 容器网络配置需要注意端口映射

### 10.3 反向代理配置
```bash
# 建议安装Nginx进行反向代理
sudo yum install -y nginx
# 配置文件路径: /etc/nginx/conf.d/
```

---

## 11. 监控与维护

### 11.1 系统监控
- 腾讯云监控代理已安装运行
- 建议配置告警规则
- 关键指标: CPU、内存、磁盘、网络

### 11.2 日志管理
- 系统日志: `/var/log/messages`
- 应用日志: 建议统一存放至 `/var/log/app/`
- 日志轮转: 建议配置logrotate

---

## 12. 扩展建议

### 12.1 硬件升级
- 当前配置适合中小型应用
- 如需承载更大流量，建议升级CPU和内存
- 存储空间充足，暂无需扩容

### 12.2 软件优化
- 安装Nginx提供更专业的Web服务
- 配置Redis缓存提升性能
- 考虑使用负载均衡

---

## 13. 联系信息
- **技术支持**: 腾讯云CVM控制台
- **文档维护**: 开发产品部门
- **更新频率**: 系统重大变更后更新

---
**文档结束**